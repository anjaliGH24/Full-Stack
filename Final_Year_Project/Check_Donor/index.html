<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.1.0/fonts/remixicon.css" rel="stylesheet"/>
  <!-- fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <!-- fonts -->

  <link rel="icon" href="/Images/2.png">
  <link rel="stylesheet" href="./style.css">

  <title>PulseShare-Nearby Donors</title>
</head>

<body>

  <div class="container-fluid">
    <nav class="navbar navbar-expand-lg bg-transparent">
      <div class="container-fluid d-flex justify-content-between">
          <div class="imglogo">
              <img src="/Images/1.png" alt="Logo" class="d-inline-block object-fit-cover imglogo" >
          </div>
          <div class="textnav">
                  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                      <span class="navbar-toggler-icon"></span>
                  </button>
                  <div class="collapse navbar-collapse" id="navbarSupportedContent">
                      <ul class="navbar-nav me-auto mb-2 mb-lg-0 gap-4 px-5">
                        <li class="nav-item">
                          <a class="nav-link active" aria-current="page" href="/BDMS.html">Home</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link active" aria-current="page" href="/About_us Page/About.html">About us</a>
                        </li>
                          <li class="nav-item dropdown">
                              <a class="nav-link  dropdown-toggle" href="#" data-bs-toggle="dropdown"> want to DONATE  </a>
                              <ul class="dropdown-menu">
                              <li><a class="dropdown-item" href="/BDMS.html#services"> Register as a donor </a></li>
                              <li><a class="dropdown-item" href="/D_patient/index.html"> Donate to Patient</a></li>
                              <li><a class="dropdown-item" href="/D_drive/index.html"> Donate at Donation Drive </a></li>
                              </ul>
                          </li>
                          <li class="nav-item dropdown">
                              <a class="nav-link  dropdown-toggle" href="#" data-bs-toggle="dropdown"> looking for blood  </a>
                              <ul class="dropdown-menu">
                                  <li><a class="dropdown-item" href="/BDMS.html#services"> Request for Blood </a></li>
                                  <li><a class="dropdown-item" href="./index.html"> Check nearby Donors </a></li>
                              </ul>
                          </li>                                
                          <li class="nav-item">
                              <a class="nav-link active" aria-current="page" href="/contact/index.html">Contact</a>
                          </li>
                      </ul>
                  </div>
          </div>     
      </div>
  </nav>


    <div class="container-fluid my-5">
        <div class="container shadow rounded-2 bg-white pb-2">
          <div class="text text-center bg-danger p-2">
            <h4>Check Nearby Donors</h4 >
          </div>
            <form class="service-form row g-5 p-3" id="service-form">
                <div class="col-3 selects">
                    <div class="select d-flex">
                        <h6>Select State</h6>
                        <select class="form-select state" id="state" aria-label="Default select example">
                          <option selected>none</option>
                          <option value="Andaman & Nicobar Islands">Andaman & Nicobar Islands</option>
                          <option value="Andhra Pradesh">Andhra Pradesh</option>
                          <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                          <option value="Assam">Assam</option>
                          <option value="Bihar">Bihar</option>
                          <option value="Chandigarh">Chandigarh</option>
                          <option value="Chhattisgarh">Chhattisgarh</option>
                          <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                          <option value="Daman and Diu">Daman and Diu</option>
                          <option value="Delhi">Delhi</option>
                          <option value="Goa">Goa</option>
                          <option value="Gujarat">Gujarat</option>
                          <option value="Haryana">Haryana</option>
                          <option value="Himachal Pradesh">Himachal Pradesh</option>
                          <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                          <option value="Jharkhand">Jharkhand</option>
                          <option value="Karnataka">Karnataka</option>
                          <option value="Kerala">Kerala</option>
                          <option value="Ladakh">Ladakh</option>
                          <option value="Lakshadweep">Lakshadweep</option>
                          <option value="Madhya Pradesh">Madhya Pradesh</option>
                          <option value="Maharashtra">Maharashtra</option>
                          <option value="Manipur">Manipur</option>
                          <option value="Meghalaya">Meghalaya</option>
                          <option value="Mizoram">Mizoram</option>
                          <option value="Nagaland">Nagaland</option>
                          <option value="Odisha">Odisha</option>
                          <option value="Puducherry">Puducherry</option>
                          <option value="Punjab">Punjab</option>
                          <option value="Rajasthan">Rajasthan</option>
                          <option value="Sikkim">Sikkim</option>
                          <option value="Tamil Nadu">Tamil Nadu</option>
                          <option value="Telangana">Telangana</option>
                          <option value="Tripura">Tripura</option>
                          <option value="Uttarakhand">Uttarakhand</option>
                          <option value="Uttar Pradesh">Uttar Pradesh</option>
                          <option value="West Bengal">West Bengal</option>
                        </select>
                    </div>
                </div>
                <div class="col-3">
                    <div class="select d-flex">
                      <h6 class="heads">Blood Group</h6>
                        <select class="form-select blood mt-1" id="bloodgroup" aria-label="Default select example">
                          <option selected>none</option>
                          <option value="A+">A+</option>
                          <option value="B+">B+</option>
                          <option value="AB+">AB+</option>
                          <option value="A-">A-</option>
                          <option value="B-">B-</option>
                          <option value="AB-">AB-</option>
                          <option value="O+">O+</option>
                          <option value="O-">O-</option>
                        </select>
                      </div>
                </div>
                <div class="col-3">
                    <div class="col-md-2 select d-flex">
                        <h6>ZIP</h6>
                        <input type="text" class="form-control" id="inputZip1">
                    </div>
                </div>
                <div class="col-3">
                    <button type="submit" id="submit" class="btn btn-outline-dark">Submit</button>
                </div>
            </form>
            <div class="container mb-4">
              <div class="row row-cols-1 row-cols-md-3 g-4" id="empty">
        
              </div>
            </div> 
        </div>
        
    </div>
    

    <div class="container charts">
      <h2>Compatibility Charts</h2> 

      <div class=" row row-cols-1 row-cols-md-3 g-4">
          <div class="col">
            <div class="card h-100 mb-3" style="max-width: 540px;">
              <div class="row g-0">
                  <img src="/Check_Donor/Chart1.jpeg" class="img-fluid rounded-start" alt="...">
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card h-100 mb-3" style="max-width: 540px;">
              <div class="row g-0">
                  <img src="/Check_Donor/chart2.jpeg" class="img-fluid rounded-start" alt="...">
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card h-100 mb-3" style="max-width: 540px;">
              <div class="row g-0">
                  <img src="/Check_Donor/chart3.jpeg" class="img-fluid rounded-start" alt="...">
              </div>
            </div>
          </div>
         
        </div>
    </div>




    <!-- <div class="marque mt-2">
      <div class="scrolling ">
        <h1>DONATE BLOOD <span><i class="ri-contrast-drop-2-line"></i></span> SAVE LIFE <span><i class="ri-contrast-drop-2-line"></i></span></h1>
        <h1>DONATE BLOOD <span><i class="ri-contrast-drop-2-line"></i></span> SAVE LIFE <span><i class="ri-contrast-drop-2-line"></i></span></h1>
        <h1>DONATE BLOOD <span><i class="ri-contrast-drop-2-line"></i></span> SAVE LIFE <span><i class="ri-contrast-drop-2-line"></i></span></h1>
        <h1>DONATE BLOOD <span><i class="ri-contrast-drop-2-line"></i></span> SAVE LIFE <span><i class="ri-contrast-drop-2-line"></i></span></h1>
        <h1>DONATE BLOOD <span><i class="ri-contrast-drop-2-line"></i></span> SAVE LIFE <span><i class="ri-contrast-drop-2-line"></i></span></h1>
      </div>
    </div> -->

  </div>

  <div class="container-fluid footersec">
    <div class=" container footer px-5 pt-5 pb-2">
        <h2>PulseShare</h2>
      <p>By donating blood, you become a lifeline for those in need, offering hope, healing, and a chance at life. Your generosity transforms moments of crisis into opportunities for survival, underscoring the invaluable difference every donor makes in the lives of others. Join us in this noble endeavor, where each donation is a testament to the power of compassion and humanity, making a lasting difference one drop at a time.
      </p>
    </div>
    <div class="containe px-5">
      <div class="row">
        <div class="col ico d-flex ms-md-5 ps-md-5">
          <i class="ri-phone-line"></i>
          <div class="textf">
            <h4>Phone</h4>
            <p>+91 9985-5899</p>
          </div>
        </div>
        <div class="col ico d-flex">
          <i class="ri-mail-line"></i>
          <div class="textf">
            <h4>Email</h4>
            <p>lifesaver@support.com</p>
          </div>
        </div>
      </div>  
    </div>  
  </div>

<footer class="footer-container">
    <div class="container pt-4 pb-2 copyright-container">
        <div class="row">
            <div class="col-md text-center copyright">
                <p> &copy; 2024 LifeSaver. All rights reserved.</p>
            </div>
        </div>
    </div>
</footer>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous">
  </script>

<script>
  const data=document.getElementById('service-form');
  data.addEventListener('submit',fetching);

 function fetching(e){
  e.preventDefault();
  const info1=document.getElementById('state').value;
  const info2=document.getElementById('bloodgroup').value;
  const info3=document.getElementById('inputZip1').value;

  console.log(info1,info2,info3);
  
  async function fetchdata(){
    const url='http://localhost:3000/donor'
    const response = await fetch(url,{
      method:'POST',
      body:JSON.stringify({
      state_cd: info1,
      blood_cd: info2,
      zip_cd: info3,
    }),
    headers: {
      "Content-type": "application/json; charset=UTF-8"
    }
    });
    const output= document.getElementById('empty');
        const responseData = await response.json();
        let html = "";
        if ( responseData.message === "success") {
          responseData.Response.forEach(({ first_name, last_name, phone, age, gender, blood }) => {
            html += `
                <div class="col">
                    <div class="card h-100" style="max-width: 800px;">
                        <div class="row g-0">
                            <div class="col-md-4 ps-3 d-flex justify-content-center align-items-center">
                                <img src="/Sample_User_Icon.png" class="img-fluid cardimg" alt="...">
                            </div>
                            <div class="col-md-8">
                                <div class="card-body">
                                    <h5 class="card-title">Blood Group : ${blood} </h5>
                                    <p class="card-text">Name : ${first_name} ${last_name} <br>
                                        Number : ${phone} <br>
                                        Age : ${age} <br>
                                        Gender : ${gender}
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
          });
          output.innerHTML = html;
        } else {
          html = `
              <div class="alert alert-info" role="alert">
                ${responseData.Response ? responseData.Response : responseData.message}
              </div>
          `;
          output.innerHTML = html;
        }
  
  }
  fetchdata();
}


  </script>

</body>
</html>